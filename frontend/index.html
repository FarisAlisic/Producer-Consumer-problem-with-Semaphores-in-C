<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Store / Warehouse — Producer–Consumer (Semaphores)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body{
      background:
        radial-gradient(1200px 700px at 15% -10%, #1e1b4b 0%, transparent 60%),
        #0a0a16;
      color:#e5e7eb;
    }
    .glassbar{
      background: rgba(49,46,129,.65);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(99,102,241,.35);
    }
    .shop-shell{
      border-radius: 18px;
      border: 1px solid rgba(99,102,241,.35);
      background: linear-gradient(180deg, rgba(30,27,75,.72), rgba(30,27,75,.55));
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .shop-awning{
      height: 36px;
      background: repeating-linear-gradient(
        90deg,
        #4338ca 0 28px,
        #22d3ee 28px 56px
      );
      border-bottom: 1px solid rgba(99,102,241,.35);
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
    }
    .shop-window{
      padding: 18px;
    }
    .tl{
      width: 54px; border-radius: 14px; padding: 10px 10px 14px;
      display:flex; flex-direction:column; gap:10px; align-items:center;
      background:#0b0b15;
      box-shadow: inset 0 2px 6px rgba(0,0,0,.5), 0 8px 18px rgba(0,0,0,.35);
    }
    .bulb{
      width: 22px; height: 22px; border-radius:9999px;
      filter: blur(.6px) brightness(.35) saturate(.8);
      opacity:.45; box-shadow: inset 0 0 6px rgba(0,0,0,.6);
      transition: .18s ease;
    }
    .bulb.on{
      filter:none; opacity:1;
      box-shadow: 0 0 6px rgba(255,255,255,.35),
                  0 0 14px currentColor,
                  0 0 28px currentColor;
      transform: translateZ(0);
    }
    .bulb.red{    background:#ef4444; color:#ef4444; }
    .bulb.yellow{ background:#eab308; color:#eab308; }
    .bulb.green{  background:#22c55e; color:#22c55e; }

    @keyframes slotPulse { 0%{transform:scale(1)} 40%{transform:scale(1.12)} 100%{transform:scale(1)} }
    .slot-pulse{ animation: slotPulse .5s ease; }

    .actor { width: 40px; height: 24px; opacity: .95; }
    .actor.person { width: 26px; height: 42px; }
    .actor.wait { animation: bob .9s ease-in-out infinite; }
    @keyframes bob { 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-3px) } }
    .actor.drive-in  { animation: driveIn .35s ease-out forwards; }
    .actor.walk-in   { animation: driveIn .35s ease-out forwards; }
    @keyframes driveIn { from{ transform: translateX(-16px); opacity:.0 } to{ transform: translateX(0); opacity:.95 } }
    .actor.to-shelf  { animation: toShelf .45s ease-in-out forwards; }
    @keyframes toShelf { from{ transform: translateX(0) } to{ transform: translateX(52px) } } /* adjust if needed */
    .actor.from-shelf{ animation: fromShelf .35s ease-in-out forwards; }
    @keyframes fromShelf { from{ transform: translateX(52px); opacity:.95 } to{ transform: translateX(82px); opacity:0 } }
  </style>
</head>
<body class="min-h-screen">
  <!-- Top bar -->
  <header class="glassbar sticky top-0 z-10">
    <div class="mx-auto max-w-7xl px-6 py-3 flex flex-wrap items-end gap-4">
      <div class="mr-4">
        <h1 class="text-base font-semibold tracking-wide text-white">Store / Warehouse — Producer–Consumer (Semaphores)</h1>
      </div>

      <label class="text-xs text-indigo-100/90">Producers
        <input id="prod" type="number" min="0" value="3"
               class="mt-1 w-24 rounded-lg border border-indigo-400/40 bg-indigo-50/80 px-3 py-1.5 text-slate-900">
      </label>
      <label class="text-xs text-indigo-100/90">Consumers
        <input id="cons" type="number" min="0" value="3"
               class="mt-1 w-24 rounded-lg border border-indigo-400/40 bg-indigo-50/80 px-3 py-1.5 text-slate-900">
      </label>
      <label class="text-xs text-indigo-100/90">Run (sec)
        <input id="run" type="number" min="1" value="20"
               class="mt-1 w-24 rounded-lg border border-indigo-400/40 bg-indigo-50/80 px-3 py-1.5 text-slate-900">
      </label>
      <label class="text-xs text-indigo-100/90">Item types (comma)
        <input id="items" type="text" value="milk,bread,eggs,cream"
               class="mt-1 w-[24rem] rounded-lg border border-indigo-400/40 bg-indigo-50/80 px-3 py-1.5 text-slate-900">
      </label>
      <label class="text-xs text-indigo-100/90">Speed (ms)
        <input id="speed" type="number" min="50" value="600"
               class="mt-1 w-24 rounded-lg border border-indigo-400/40 bg-indigo-50/80 px-3 py-1.5 text-slate-900">
      </label>

      <button id="simulate"
              class="ml-auto inline-flex items-center gap-2 rounded-xl bg-emerald-500 text-white px-4 py-2 text-sm font-semibold shadow hover:bg-emerald-600 transition">
        ▶ Run
      </button>
    </div>
  </header>
  <svg width="0" height="0" style="position:absolute">
    <defs>
      <!-- Simple truck -->
      <g id="truck">
        <rect x="1" y="6" width="28" height="14" rx="2" fill="currentColor" opacity=".9"/>
        <rect x="29" y="9" width="10" height="11" rx="1.5" fill="currentColor" opacity=".75"/>
        <circle cx="8" cy="22" r="3" fill="#0ea5e9"/>
        <circle cx="24" cy="22" r="3" fill="#0ea5e9"/>
        <rect x="3" y="8" width="10" height="6" fill="#93c5fd"/>
      </g>
      <!-- Simple person -->
      <g id="person">
        <circle cx="8" cy="6" r="5" fill="#fde68a"/>
        <rect x="4" y="12" width="8" height="18" rx="3" fill="currentColor"/>
        <rect x="0" y="18" width="16" height="6" rx="3" fill="currentColor" opacity=".6"/>
      </g>
    </defs>
  </svg>
  <!-- Shop -->
  <main class="mx-auto max-w-7xl px-6 py-8">
    <div class="shop-shell">
      <div class="shop-awning"></div>
      <div class="shop-window">
        <div id="store" class="grid grid-cols-2 justify-items-center gap-10"></div>
      </div>
    </div>

    <!-- Logs -->
    <section class="mt-8">
      <h3 class="text-indigo-100 text-base font-semibold mb-2">Human Log</h3>
      <pre id="hlog" class="h-[260px] overflow-auto rounded-xl border border-indigo-700/40 bg-indigo-50/90 text-slate-800 p-3 text-[13px] leading-5"></pre>

      <h3 class="text-indigo-200/80 text-sm font-semibold mt-6 mb-2">Raw JSON (debug)</h3>
      <pre id="log" class="h-[160px] overflow-auto rounded-xl border border-indigo-700/40 bg-indigo-50/70 text-slate-700 p-3 text-[12px] leading-5"></pre>
    </section>
  </main>

  <script src="./app.js"></script>
</body>
</html>